<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Meetup | Questioner</title>
	<link rel="stylesheet" type="text/css" href="./css/style.css">
	<link rel="stylesheet" href="fontawesome-free/css/all.min.css">
</head>
<body>
	<header>
		<div class="logo"><span class="highlight">Que</span>stioner</div>
		<nav>
			<ul>
				<li><a href="signin.html">Login</a></li>
				<li><a href="signup.html">Signup</a></li>
				<li class="current"><a href="meetups.html">Meetups</a></li>
				<li class="sub-menu"><a href="#">Ndayisenga</a>
					<ul>
						<li><a href="profile.html">Profile</a></li>
						<li><a href="#">Logout</a></li>
					</ul>
				</li>
			</ul>
		</nav>
		<div class="menu-toggle">
			<i class="fa fa-bars"></i>
		</div>
	</header>
	<div class="content">
		<div class="content-inside">
			<div class="container">
				<div id="meetup-card">
					<h2 id="meetup-topic"></h2>
					<p id="meetup-location"></p>
					<p id="meetup-date"></p>
					<form class="form">
						<select>
							<option>Choose a response</option>
							<option>Maybe</option>
							<option>No</option>
							<option>Yes</option>
						</select>
						<button type="submit" class="button_1">Send</button>
					</form>
				</div>

				<div id="meetup-card">
					<h2>Do you have any question?</h2>
					<form class="form">
						<input type="text" name="title" placeholder="Title...">
						<textarea name="body" placeholder="Body..." rows="5"></textarea>
						<button class="button_1" type="submit">Submit</button>
					</form>
					
				</div>
				<div class="question">
					<h3 id="question-title">Who are the speakers?</h3>
					<p id="question-body">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
					quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
					consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
					cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
					proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
					<hr>
					<button class="vote" onclick="upvote(this)" id="upvote-button"><i id="upvote-icon" class="far fa-thumbs-up"></i>Upvote</button>
					<button class="vote" onclick="downvote(this)" id="downvote-button"><i id="downvote-icon" class="far fa-thumbs-down"></i>Downvote</button>
					<hr>
					<form>
						<input type="text" name="comment" placeholder="Write a comment...">
						<button class="button_1">Comment</button>
					</form>

					<div class="comment">
						<div class="author-info">
							<img src="img/default.png" class="author-image">
							<div class="author-name">
								<h5>Ndayisenga Pacifique</h5>
								<p class="author-time">12 minutes ago</p>
							</div>
						</div>
						<div class="comment-content">
							Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
							tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
							quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
							consequat.
						</div>
					</div>

					<div class="comment">
						<div class="author-info">
							<img src="img/default.png" class="author-image">
							<div class="author-name">
								<h5>Manzi</h5>
								<p class="author-time">Yesterday</p>
							</div>
						</div>
						<div class="comment-content">
							Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
							tempor incididunt consequat.
						</div>
					</div>
				</div>

				<!-- <div class="question">
					<h3>Can I bring my laptop?</h3>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
					tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
					quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
					consequat.</p>
					<hr>
					<button class="vote" onclick="upvote(this)" id="upvote-button"><i id="upvote-icon" class="far fa-thumbs-up"></i>Upvote</button>
					<button class="vote" onclick="downvote(this)" id="downvote-button"><i id="downvote-icon" class="far fa-thumbs-down"></i>Downvote</button>
					<hr>
					<form>
						<input type="text" name="comment" placeholder="Write a comment...">
						<button class="button_1">Comment</button>
					</form>

					<div class="comment">
						<div class="author-info">
							<img src="img/default.png" class="author-image">
							<div class="author-name">
								<h5>Chris Ituze</h5>
								<p class="author-time">12 minutes ago</p>
							</div>
						</div>
						<div class="comment-content">
							Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
							tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
							quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
							consequat.
						</div>
					</div>

					<div class="comment">
						<div class="author-info">
							<img src="img/default.png" class="author-image">
							<div class="author-name">
								<h5>Ishimwe Felix</h5>
								<p class="author-time">Yesterday</p>
							</div>
						</div>
						<div class="comment-content">
							Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
							tempor incididunt consequat.
						</div>
					</div>
				</div> -->

			</div>
		</div>
	</div>
	<footer>
		<p>Questioner, Copyright &copy; 2019</p>
	</footer>

	<script type="text/javascript">
		var getSiblings = function (elem) {
			var siblings = [];
			var sibling = elem.parentNode.firstChild;
			var skipMe = elem;
			for ( ; sibling; sibling = sibling.nextSibling ) 
			if ( sibling.nodeType == 1 && sibling != elem )
				siblings.push( sibling );
			return siblings;
		}
		document.getElementsByClassName('menu-toggle')[0].onclick = function (){
			document.getElementsByTagName('nav')[0].classList.toggle('current');
		};

		document.getElementsByClassName('sub-menu')[0].onclick = function() {
			getSiblings(document.getElementsByClassName('sub-menu')[0]).forEach(sibling => {
				sibling.classList.remove('current');
			});
			document.getElementsByClassName('sub-menu')[0].classList.toggle('current');
		};
	</script>

	<script>
		var urlParams = new URLSearchParams(location.search);
		var id = urlParams.get('id');
		fetch('https://paccy-questioner.herokuapp.com/api/v1/meetups/' + id, {
				method: 'GET',
				headers: {
					'Accept': 'application/json, text/plain, */*',
					'Content-type': 'application/json',
					'Authorization': localStorage.getItem('token')
				}
			}).then((res) => res.json())
			.then((data) => {
				  if(data.status == 404) {
					  console.log(data.error);
				  } else {
					var title = document.getElementById('meetup-topic');
					var location = document.getElementById('meetup-location');
					var date = document.getElementById('meetup-date');

					var meetup = data.data[0];

					title.innerHTML = meetup.topic;
					location.innerHTML ="Venue: " + meetup.location;
					date.innerHTML = "Date: " + new Date(meetup.happening_on).toLocaleDateString("en-US", { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' });

					fetch('https://paccy-questioner.herokuapp.com/api/v1/meetups/' + meetup.id + '/questions', {
						method: 'GET',
						headers: {
							'Accept': 'application/json, text/plain, */*',
							'Content-type': 'application/json',
							'Authorization': localStorage.getItem('token')
						}
					})
					.then((res) => res.json())
					.then((data) => {
						if(data.status == 400 || data.status == 404) {
							console.log(data.error);
						} else {
							var title = document.getElementById('question-title');
							var body = document.getElementById('question-body');

							var question = data.data[0];

							title.innerHTML = question.title;
							body.innerHTML = question.body;


						}
					});
				  }
			}).catch(function(error){
				console.log(error);
			});
	</script>

	<!-- <script type="text/javascript">
		function upvote(x) {
			var icon1 = document.getElementById('upvote-icon');
			var icon2 = document.getElementById('downvote-icon');
			var button1 = document.getElementById('upvote-button');
			var button2 = document.getElementById('downvote-button');

			if (icon1.classList.contains("far") || icon2.classList.contains("fas")) {
				icon1.classList.remove("far")
				icon2.classList.remove("fas");
				icon1.classList.add("fas");
				icon2.classList.add("far");

				x.style.color = '#28a745';
				button2.style.color = '#606770';
			}
			
			else{
				icon1.classList.remove("fas");
				icon1.classList.add("far");

				x.style.color = '#606770';
			}
		}

		function downvote(x) {
			var icon1 = document.getElementById('upvote-icon');
			var icon2 = document.getElementById('downvote-icon');
			var button1 = document.getElementById('upvote-button');
			var button2 = document.getElementById('downvote-button');

			if (icon2.classList.contains("far") || icon1.classList.contains("fas")) {
				icon2.classList.remove("far")
				icon1.classList.remove("fas");
				icon2.classList.add("fas");
				icon1.classList.add("far");

				x.style.color = '#28a745';
				button1.style.color = '#606770';
			}
			
			else{
				icon2.classList.remove("fas");
				icon2.classList.add("far");

				x.style.color = '#606770';
			}
		}
	</script> -->
</body>
</html>